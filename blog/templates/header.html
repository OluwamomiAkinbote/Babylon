{% load static %}

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>

<body class="m-0 p-0">
<!-- top_bar -->

    {% include 'top_bar.html'%}

     
    <div class="bg-white shadow-md relative z-20 backdrop-blur-md bg-opacity-75">
        <!-- First Container: Social Links, Logo, and Search Bar -->
        <div class="py-2 flex justify-between items-center px-2 hidden sm:flex">
            <!-- Social Links -->
            <div class="social-links flex space-x-4 text-gray-900">
                <!-- Facebook -->
                <a href="https://www.facebook.com" target="_blank" class="rounded-full bg-blue-100 w-7 h-7 flex items-center justify-center hover:bg-blue-200 transition">
                    <i class="fab fa-facebook-f text-blue-600"></i>
                </a>
                <!-- X (formerly Twitter) -->
                <a href="https://www.x.com" target="_blank" class="rounded-full bg-gray-900 w-7 h-7 flex items-center justify-center hover:bg-gray-950 transition">
                    <i class="fab fa-x-twitter text-white"></i>
                </a>
            </div>
            
            <!-- logo -->
            <div class="logo">
                <img src="{% static 'images/logoheader.png' %}" alt="Logo" class="h-12 w-auto md:h-12  object-cover">
            </div>
            
            <!-- Search Bar -->
            <div class="search flex">
                <div class="relative w-full">
                    <!-- Search Input with icon inside -->
                    <input id="search-input" type="text" placeholder="Search blog posts..." class="border border-gray-300 rounded-l-md py-2 px-4 pl-10 outline-none focus:ring-0 w-full">
                    <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500"></i>
            
                    <!-- Custom Suggestion Box -->
                    <div id="suggestion-box" class="absolute bg-white border border-gray-300 rounded-md shadow-lg w-full hidden z-10"></div>
                </div>
            
                <!-- Search Button with icon only -->
                <button id="search-button" class="bg-[#10AA6A] text-white rounded-r-md py-2 px-3 hover:bg-green-800 focus:outline-none focus:ring-0">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            
        </div>
        <!-- navbar on lg screen -->
        <div class=" navbar md:flex hidden justify-between  bg-[#10AA6A] text-white items-center px-4 py-2 font-semibold mb-4 shadow-md text-sm">
            <div class="home">
                <a href="/">Home</a>
            </div>
            <div class="category">
                <ul class="flex space-x-4 capitalize">
                    {% for category in navbar_categories %}
                    <li class="hover:underline hover:text-red-800 translate-x-1 px-2 py-2">
                        <a href="{% url 'category_list' category.slug %}">{{ category.name }}</a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        <!-- navigation on small screen -->
        <div>

            {% include 'nav_bar.html' %}



        </div>
    </div>
    <script>
        // Function to toggle the visibility of the navbar based on screen width
        function toggleNavbarVisibility() {
            const navbar = document.querySelector('.navbar');
            if (window.innerWidth < 657) {
                navbar.style.display = 'none';
            } else {
                navbar.style.display = 'flex';
            }
        }
    
        // Initial check
        document.addEventListener('DOMContentLoaded', toggleNavbarVisibility);
    
        // Check on window resize
        window.addEventListener('resize', toggleNavbarVisibility);
    
        // Toggle category container visibility
        document.getElementById('menu-button').addEventListener('click', function () {
            let categoryContainer = document.getElementById('category-container');
            categoryContainer.classList.toggle('hidden');
        });
    
        // Toggle search container visibility
        document.getElementById('search-toggle').addEventListener('click', function () {
            let searchContainer = document.getElementById('search-container');
            searchContainer.classList.toggle('hidden');
        });
    
        // Handle search functionality
        document.addEventListener('DOMContentLoaded', function () {
            const searchButton = document.getElementById('search-button');
            const searchInput = document.getElementById('search-input');
    
            searchButton.addEventListener('click', function () {
                const query = searchInput.value.trim();
                if (query) {
                    window.location.href = `/search/?query=${encodeURIComponent(query)}`;
                }
            });
        });
    </script>
    
    

<script>
    document.getElementById('search-input').addEventListener('input', function() {
        var query = this.value;

        if (query.length > 0) {
            fetch(`/get-suggestions/?query=${query}`)
            .then(response => response.json())
            .then(data => {
                var suggestionBox = document.getElementById('suggestion-box');
                suggestionBox.innerHTML = ''; // Clear previous suggestions
                suggestionBox.classList.remove('hidden'); // Show the box

                if (data.length > 0) {
                    data.forEach(function(item) {
                        var suggestionItem = document.createElement('div');
                        suggestionItem.classList.add('p-2', 'hover:bg-gray-100', 'cursor-pointer');
                        suggestionItem.innerHTML = item;

                        // Add click event to select the suggestion
                        suggestionItem.addEventListener('click', function() {
                            document.getElementById('search-input').value = item;
                            suggestionBox.classList.add('hidden'); // Hide suggestions after selection
                        });

                        suggestionBox.appendChild(suggestionItem);
                    });
                } else {
                    var noResult = document.createElement('div');
                    noResult.classList.add('p-2', 'text-gray-500');
                    noResult.innerHTML = 'No results found';
                    suggestionBox.appendChild(noResult);
                }
            });
        } else {
            document.getElementById('suggestion-box').classList.add('hidden');
        }
    });

    // Close the suggestion box when clicking outside
    document.addEventListener('click', function(e) {
        var suggestionBox = document.getElementById('suggestion-box');
        if (!document.getElementById('search-input').contains(e.target)) {
            suggestionBox.classList.add('hidden');
        }
    });
</script>
</body>
