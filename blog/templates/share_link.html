<!-- Share Button -->
<button id="share-button" class="relative flex items-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 focus:outline-none">
    <span>Share</span>
    <i class="fas fa-share-alt"></i>
</button>

<!-- Dropdown Menu -->
<div id="share-dropdown" class="hidden absolute mx-6 left-0 w-48 bg-white shadow-lg rounded border border-gray-200 z-10">
    <div class="p-4">
        <a id="twitter-share" href="#" target="_blank" rel="noopener noreferrer" class="block px-4 py-2 text-blue-500 hover:bg-blue-100"><i class="fab fa-twitter"></i> Twitter</a>
        <a id="facebook-share" href="#" target="_blank" rel="noopener noreferrer" class="block px-4 py-2 text-blue-600 hover:bg-blue-100"><i class="fab fa-facebook-f"></i> Facebook</a>
        <a id="linkedin-share" href="#" target="_blank" rel="noopener noreferrer" class="block px-4 py-2 text-blue-700 hover:bg-blue-100"><i class="fab fa-linkedin-in"></i> LinkedIn</a>
        <a id="whatsapp-share" href="#" target="_blank" rel="noopener noreferrer" class="block px-4 py-2 text-green-500 hover:bg-green-100"><i class="fab fa-whatsapp"></i> WhatsApp</a>
    </div>
</div>

<!-- JavaScript for Dynamic Share Links -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const shareButton = document.getElementById('share-button');
        const shareDropdown = document.getElementById('share-dropdown');

        shareButton.addEventListener('click', function () {
            shareDropdown.classList.toggle('hidden');
        });

        document.addEventListener('click', function (event) {
            if (!shareButton.contains(event.target) && !shareDropdown.contains(event.target)) {
                shareDropdown.classList.add('hidden');
            }
        });

        function updateShareLinks(title, url) {
            const encodedTitle = encodeURIComponent(title);
            const encodedUrl = encodeURIComponent(url);

            document.getElementById('twitter-share').href = `https://twitter.com/intent/tweet?url=${encodedUrl}&text=${encodedTitle}`;
            document.getElementById('facebook-share').href = `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`;
            document.getElementById('linkedin-share').href = `https://www.linkedin.com/shareArticle?url=${encodedUrl}&title=${encodedTitle}`;
            document.getElementById('whatsapp-share').href = `https://api.whatsapp.com/send?text=${encodedTitle}%20${encodedUrl}`;
        }

        updateShareLinks('{{ post.title }}', '{{ request.build_absolute_uri }}');
    });
</script>
